# Example UWB Localizer Configuration File
# Copy this file to uwb_beacons_params.yaml and modify as needed
# This file is ignored by git to prevent accidental commits of personal configurations

uwb_beacons:
  ros__parameters:
    # Serial communication parameters
    port: "/dev/ttyUSB0"  # Change to your UWB device port
    baud: 230400          # Adjust based on your UWB system
    timeout: 1.0

    publication_frequency: 10.0 # Hz

    # Frame and coordinate system
    frame_id: "uwb_localizer"  # Change to your preferred frame (e.g., "robot_base", "room_map")
    z_sign: 1             # Use -1 if you need to flip the Z-axis

    # Timer frequency (Hz) - higher frequency for more responsive updates
    timer_frequency: 100.0  # Reduce if you experience high CPU usage

    # Range sensor parameters
    min_range: 0.0        # Minimum valid range in meters
    max_range: 100.0      # Maximum valid range in meters
    field_of_view: 0.1    # Field of view in radians
    radiation_type: 1     # 1 = INFRARED, 2 = LASER, 3 = SONAR

    # Calibration parameters - CRITICAL: Adjust these based on your UWB system
    calibration: "linear"  # Options: linear, quadratic, cubic, none
    calib_params: [0.001, 0.0]  # [scale_factor, offset] for linear calibration

    # Anchor positions (x, y, z in meters) - CRITICAL: Set these to your actual anchor positions
    # At least 3 anchors are required for trilateration
    # Example setup for a 4m x 4m room:
    anchors_names: ["anchor.1", "anchor.2", "anchor.3", "anchor.4"]
    anchor.1: [0.0, 0.0, 0.0]
    anchor.2: [4.0, 0.0, 0.0]
    anchor.3: [0.0, 4.0, 0.0]
    anchor.4: [4.0, 4.0, 0.0]

    # GPS coordinate for zero position in local coordinates system
    latitude: 55.760372
    longitude: 48.758703
    altitude: 0.0

# Calibration Notes:
# - Linear: distance = calib_params[0] * raw_value + calib_params[1]
# - Quadratic: distance = calib_params[0] * raw_value^2 + calib_params[1] * raw_value + calib_params[2]
# - Cubic: distance = calib_params[0] * raw_value^3 + calib_params[1] * raw_value^2 + calib_params[2] * raw_value + calib_params[3]
# - None: distance = raw_value (no calibration applied)

# Anchor Setup Tips:
# 1. Measure anchor positions accurately using a tape measure or laser distance meter
# 2. Ensure anchors are at different heights when possible for better 3D positioning
# 3. Place anchors to form a good geometric configuration (avoid colinear anchors)
# 4. Test with known positions to verify accuracy
